<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Session 1: Basics of R</title>

<script src="site_libs/header-attrs-2.9/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/spacelab.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/clipboard-1.7.1/clipboard.min.js"></script>
<link href="site_libs/primer-tooltips-1.4.0/build.css" rel="stylesheet" />
<link href="site_libs/klippy-0.0.0.9500/css/klippy.min.css" rel="stylesheet" />
<script src="site_libs/klippy-0.0.0.9500/js/klippy.min.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>




<style type="text/css">
/* for pandoc --citeproc since 2.11 */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
    Overview
  </a>
</li>
<li>
  <a href="schedule.html">
    <span class="fa fa-info"></span>
     
    Schedule
  </a>
</li>
<li>
  <a href="1_RBasics.html">
    <span class="fa fa-book"></span>
     
    Session 1
  </a>
</li>
<li>
  <a href="2_ScrapingAndReadingInDocuments.html">
    <span class="fa fa-book"></span>
     
    Session 2
  </a>
</li>
<li>
  <a href="3_CleaningAndManipulating.html">
    <span class="fa fa-book"></span>
     
    Session 3
  </a>
</li>
<li>
  <a href="4_WordFreq.html">
    <span class="fa fa-book"></span>
     
    Session 4
  </a>
</li>
<li>
  <a href="5_SentAndDict.html">
    <span class="fa fa-book"></span>
     
    Session 5
  </a>
</li>
<li>
  <a href="6_DocSimil.html">
    <span class="fa fa-book"></span>
     
    Session 6
  </a>
</li>
<li>
  <a href="7_topicmodelling.html">
    <span class="fa fa-book"></span>
     
    Session 7
  </a>
</li>
<li>
  <a href="8_WordEmbedding.html">
    <span class="fa fa-book"></span>
     
    Session 8
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Session 1: Basics of R</h1>

</div>


<script>
  addClassKlippyTo("pre.r, pre.markdown");
  addKlippy('right', 'top', 'auto', '1', 'Copy code', 'Copied!');
</script>
<p>First and foremost, it is good practice when dealing with text to run the following at the beginning of the R session.</p>
<pre class="r"><code>options(stringsAsFactors = FALSE)</code></pre>
<div id="data-types-in-r-very-briefly" class="section level1" number="1">
<h1 number="1"><span class="header-section-number">1</span> Data types in R (very briefly)</h1>
<p>R has officially six different data types, of which four of them we will be concerned with: character, numeric, integer, and logical. We can quickly tell what kind of data type we are working with by using typeof() or mode() functions (they’re slightly different but from our standpoint they will be same.)</p>
<pre class="r"><code>typeof(&#39;hello&#39;) # character</code></pre>
<pre><code>## [1] &quot;character&quot;</code></pre>
<pre class="r"><code>typeof(52L) # the &#39;L&#39; tells R to store it as an integer</code></pre>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<pre class="r"><code>typeof(2.542) #double, ie numeric</code></pre>
<pre><code>## [1] &quot;double&quot;</code></pre>
<pre class="r"><code>typeof(FALSE) #logical</code></pre>
<pre><code>## [1] &quot;logical&quot;</code></pre>
<pre class="r"><code># if we make an assignment typeof() will tell us the data type of the underlying value
x &lt;- 2.52; typeof(x)</code></pre>
<pre><code>## [1] &quot;double&quot;</code></pre>
<pre class="r"><code>y &lt;- &quot;Hello&quot;; typeof(y)</code></pre>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p>If we try to do operations on data types that don’t make any sense, R will let us know.</p>
<pre class="r"><code>x + y</code></pre>
<pre><code>## Error in x + y: non-numeric argument to binary operator</code></pre>
<p>Obviously, if we ask R to tell us what 2.52 + “Hello” is, it’s going to be hard to give a reasonable answer. (Notice the somewhat cryptic error message, we’re going to have to get used to that, though some of the packages we’ll be using are really making an effort to be more helpful.) In this case it’s obvious, but as you do more and more complicated things in R with larger and larger amounts of data it will not always be the case. This is a frequent source of bugs and something to be aware of from the beginning.</p>
<p>Data structures are ways and forms of combining data. The simplest way of doing this is with a “vector” essentially a list (but lists are different as we’ll soon see). You’ve already seen how to create vectors:</p>
<pre class="r"><code>c(&quot;Hello&quot;, &quot;how&quot;, &quot;are&quot;, &quot;you&quot;, &quot;?&quot;)</code></pre>
<pre><code>## [1] &quot;Hello&quot; &quot;how&quot;   &quot;are&quot;   &quot;you&quot;   &quot;?&quot;</code></pre>
<p>Other data structures we will work with are matrices (essentially two dimensional vectors, corpora, term frequency matrices and so on, but especially dataframes. These structures have different rules and frequently they are picky about what sort of operations they allow you to do with them, even if they look similar. Vectors and matrices, for instance can only hold one type of data.</p>
<pre class="r"><code>(c &lt;- c(5, &quot;hello!&quot;)) # Notice what happens here - the 5 is &quot;coerced&quot; into becoming a character. </code></pre>
<pre><code>## [1] &quot;5&quot;      &quot;hello!&quot;</code></pre>
<pre class="r"><code>c[1] + 1 # Thus you can&#39;t do arithmetic anymore on the 5 -- 5+1=6 but &quot;5&quot;+1 is the same kind of operation as 2 + &quot;Hello&quot;.</code></pre>
<pre><code>## Error in c[1] + 1: non-numeric argument to binary operator</code></pre>
<p>But you can do this with the data structure lists, which otherwise look quite similar to vectors.</p>
<pre class="r"><code>(l &lt;- list(5, &quot;hello!&quot;)) # this does not coerce the 5 to become a charcter</code></pre>
<pre><code>## [[1]]
## [1] 5
## 
## [[2]]
## [1] &quot;hello!&quot;</code></pre>
<pre class="r"><code>l[[1]] + 1 # and this now works because the 5 is still a number. Notice contents of lists are subset by double [[]]</code></pre>
<pre><code>## [1] 6</code></pre>
<p>You can put all kinds of things together in lists and name them</p>
<pre class="r"><code>ll &lt;- list(name = &quot;Bob&quot;, age = 50, ingarage = head(mtcars))
names(ll)</code></pre>
<pre><code>## [1] &quot;name&quot;     &quot;age&quot;      &quot;ingarage&quot;</code></pre>
<p>Two-dimensional vectors are matrices (must have all same data type) and 2D lists are dataframes. To find what data structure we are dealing with, we type class()</p>
<pre class="r"><code>class(ll)</code></pre>
<pre><code>## [1] &quot;list&quot;</code></pre>
<pre class="r"><code>str(ll)</code></pre>
<pre><code>## List of 3
##  $ name    : chr &quot;Bob&quot;
##  $ age     : num 50
##  $ ingarage:&#39;data.frame&#39;:    6 obs. of  11 variables:
##   ..$ mpg : num [1:6] 21 21 22.8 21.4 18.7 18.1
##   ..$ cyl : num [1:6] 6 6 4 6 8 6
##   ..$ disp: num [1:6] 160 160 108 258 360 225
##   ..$ hp  : num [1:6] 110 110 93 110 175 105
##   ..$ drat: num [1:6] 3.9 3.9 3.85 3.08 3.15 2.76
##   ..$ wt  : num [1:6] 2.62 2.88 2.32 3.21 3.44 ...
##   ..$ qsec: num [1:6] 16.5 17 18.6 19.4 17 ...
##   ..$ vs  : num [1:6] 0 0 1 1 0 1
##   ..$ am  : num [1:6] 1 1 1 0 0 0
##   ..$ gear: num [1:6] 4 4 4 3 3 3
##   ..$ carb: num [1:6] 4 4 1 1 2 1</code></pre>
<p>The str() command is also quite helpful, showing data structure, data types, names, and dimensions (which can also be found via length()). The main point to be remembered is that trying to do things with the wrong type of structure of data is a very common sources of problems. Especially as we get into more advanced text analysis packages we’ll always want to keep in mind what the structures and types of data we’re dealing with are.</p>
<div id="tidy-data" class="section level2" number="1.1">
<h2 number="1.1"><span class="header-section-number">1.1</span> Tidy data</h2>
<div class="figure" style="text-align: center">
<img src="data/tidydata.jpg" alt="Julie Lowndes &amp; Allison Horst, https://docs.google.com/presentation/d/1N7hKepabvl9OrHjvGJWPjUsfzVdB5xzV5AsFndgSwms/edit#slide=id.p"  />
<p class="caption">
Julie Lowndes &amp; Allison Horst, <a href="https://docs.google.com/presentation/d/1N7hKepabvl9OrHjvGJWPjUsfzVdB5xzV5AsFndgSwms/edit#slide=id.p" class="uri">https://docs.google.com/presentation/d/1N7hKepabvl9OrHjvGJWPjUsfzVdB5xzV5AsFndgSwms/edit#slide=id.p</a>
</p>
</div>
<p>Which of the following is tidy?</p>
<pre class="r"><code>library(tidyverse)
table1</code></pre>
<pre><code>## # A tibble: 6 x 4
##   country      year  cases population
##   &lt;chr&gt;       &lt;int&gt;  &lt;int&gt;      &lt;int&gt;
## 1 Afghanistan  1999    745   19987071
## 2 Afghanistan  2000   2666   20595360
## 3 Brazil       1999  37737  172006362
## 4 Brazil       2000  80488  174504898
## 5 China        1999 212258 1272915272
## 6 China        2000 213766 1280428583</code></pre>
<pre class="r"><code>table2</code></pre>
<pre><code>## # A tibble: 12 x 4
##    country      year type            count
##    &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;           &lt;int&gt;
##  1 Afghanistan  1999 cases             745
##  2 Afghanistan  1999 population   19987071
##  3 Afghanistan  2000 cases            2666
##  4 Afghanistan  2000 population   20595360
##  5 Brazil       1999 cases           37737
##  6 Brazil       1999 population  172006362
##  7 Brazil       2000 cases           80488
##  8 Brazil       2000 population  174504898
##  9 China        1999 cases          212258
## 10 China        1999 population 1272915272
## 11 China        2000 cases          213766
## 12 China        2000 population 1280428583</code></pre>
<pre class="r"><code>table3</code></pre>
<pre><code>## # A tibble: 6 x 3
##   country      year rate             
## * &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;            
## 1 Afghanistan  1999 745/19987071     
## 2 Afghanistan  2000 2666/20595360    
## 3 Brazil       1999 37737/172006362  
## 4 Brazil       2000 80488/174504898  
## 5 China        1999 212258/1272915272
## 6 China        2000 213766/1280428583</code></pre>
<pre class="r"><code>table4a</code></pre>
<pre><code>## # A tibble: 3 x 3
##   country     `1999` `2000`
## * &lt;chr&gt;        &lt;int&gt;  &lt;int&gt;
## 1 Afghanistan    745   2666
## 2 Brazil       37737  80488
## 3 China       212258 213766</code></pre>
<pre class="r"><code>table4b</code></pre>
<pre><code>## # A tibble: 3 x 3
##   country         `1999`     `2000`
## * &lt;chr&gt;            &lt;int&gt;      &lt;int&gt;
## 1 Afghanistan   19987071   20595360
## 2 Brazil       172006362  174504898
## 3 China       1272915272 1280428583</code></pre>
<p>There are real strengths to organizing data this way for readibility, consistency, collaboration, among other reasons. In addition, the folks at tidyverse really go out of their way to make user-friendly packages, as we’ll see again and again over the next two days. For that reason, we’re going to be doing as much of our work as feasible in the tidyverse, stepping out when we need to, then coming back in to visualize.</p>
<p>The tidyverse has it’s version of dataframes, which are called tibbles. We’ll be using these.</p>
</div>
</div>
<div id="plotting-and-visualization" class="section level1" number="2">
<h1 number="2"><span class="header-section-number">2</span> Plotting and visualization</h1>
<p>The workhorse plotting machine in the tidyverse and one of the most used individual packages in R is called ggplot.</p>
<p>ggplot works on the assumption of tidy data – one line per observation, one column for a variable. To create a minimum plot in ggplot we call the function, specify where the data is coming from, specify aesthetic mappings (what variable is mapped to the x- and y-axes).</p>
<pre class="r"><code>ggplot(data = table1, aes(x = year, y = cases)) + #we&#39;ll use the tabel1 data from above, &quot;+&quot; tells ggplot that the call continues to the 
                                                              # next line
  geom_point()                                  # how should data be represented, here with points</code></pre>
<p><img src="1_RBasics_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<p>We can see that we have six observations (lines of our dataframe tabel1) and this graphs them all. But it’s not clear what is what. First perhaps in addition to having points we’d like to see lines between the two points of the same country to be able to easily see rises or falls. And it would be nice if the graph told us which countries were being graphed and made it easier to distinguish. ggplot works by adding successive layers to a plot, which means we can start with code for a simple graph and add to it (see the <a href="documentation">https://ggplot2.tidyverse.org/reference/index.html#section-layers</a> for other layers).</p>
<pre class="r"><code>ggplot(data = table1, aes(x = year, y = cases, color = country)) + # start with our first simple plot, add colors by country (also adds legend)
  geom_point() +
  geom_line() # adds lines between the points of points </code></pre>
<p><img src="1_RBasics_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<p>There are myriad other possibilities and changes you could make. Maybe we’d like to denote the different sizes of the underlying populations? We can add titles. And we can also shift from the standard ggplot grey background to black and white, which many people think looks cleaner.</p>
<pre class="r"><code>ggplot(data = table1, aes(x = year, y = cases, color = country)) + # start with our first simple plot, add colors by country (also adds legend)
  geom_point(aes(size=population)) + # size based on population is a change to the way the data is visualized (maps it to an aesthetic) and thus goes                                      # in aes(). It might not always be obvious what goes in aes() and what doesn&#39;t.
  geom_line() + # adds lines between the points of points 
  labs(title = &quot;Cases in three countries&quot;, xtitle = &quot;Year&quot;, ytitle = &quot;Cases&quot;) +
  theme_bw()</code></pre>
<p><img src="1_RBasics_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<p>There’s lots more we could do but for our purposes (an absolute barebones, skimming-the-top-of-the-surface introduction to ggplot) this will suffice. Good texts on producing plots in ggplot (chapter 3 of <span class="citation">Wickham and Grolemund (2016)</span>; <span class="citation">Wickham (2016)</span> for a whole book; check the online <a href="documentation">https://ggplot2.tidyverse.org/</a> for online course/webinar suggestions); and on graphics more generally in R (<span class="citation">Healy (2018)</span>).</p>
<p>ggplot can be pretty finicky and you’ll write lots of ggplot code that doesn’t work but you’ll get better. Read the help files, look at documentation, and Google stuff (especially looking at postings on Stack Overflow) when you run into problems or want to know how to do things.</p>
</div>
<div id="dates" class="section level1" number="3">
<h1 number="3"><span class="header-section-number">3</span> Dates</h1>
<p>As historians, we will often be dealing with dates and there are real advantages to having R recognize our dates as dates rather than simply character strings or numbers. The data class we’ll be most interested in is <strong>date</strong> (date-time is the other major one, which gives both the date and time). If you just have a year there’s generally not much to be gained above just treating it as an integer.</p>
<p>There are ways of converting numbers or strings into dates both in base R and within the tidyverse via package called <code>lubridate</code>. I’ll show both here, though as in everything else, the tidyverse tends to be more user-friendly and is always well thought-out.</p>
<pre class="r"><code>library(lubridate) #lubridate isn&#39;t part of the core tidyverse so you have to load it separately</code></pre>
<pre><code>## 
## Attaching package: &#39;lubridate&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     date, intersect, setdiff, union</code></pre>
<pre class="r"><code>(today &lt;- &quot;12-08-2021&quot;) # a character string (we could also get today&#39;s date, in date format, with the command: today(), now() for date-time)</code></pre>
<pre><code>## [1] &quot;12-08-2021&quot;</code></pre>
<pre class="r"><code>(day &lt;- as.Date(today, format=&quot;%d-%m-%Y&quot;)) # base R</code></pre>
<pre><code>## [1] &quot;2021-08-12&quot;</code></pre>
<pre class="r"><code>(day &lt;- dmy(today)) # lubridate</code></pre>
<pre><code>## [1] &quot;2021-08-12&quot;</code></pre>
<pre class="r"><code>typeof(today); typeof(day)</code></pre>
<pre><code>## [1] &quot;character&quot;</code></pre>
<pre><code>## [1] &quot;double&quot;</code></pre>
<pre class="r"><code>class(today); class(day)</code></pre>
<pre><code>## [1] &quot;character&quot;</code></pre>
<pre><code>## [1] &quot;Date&quot;</code></pre>
<p>R stores dates as numbers (<code>double</code>) within a <code>Date</code> class. This means you can do arithmetic with it:</p>
<pre class="r"><code>day + 1 </code></pre>
<pre><code>## [1] &quot;2021-08-13&quot;</code></pre>
<p>Today + 1 day = tomorrow. Seems reasonable.</p>
<p>But you can probably see how easy it is to get confused because dates might look exactly the same but have different structures.</p>
<pre class="r"><code>day1 &lt;- &quot;1814-05-17&quot;
day2 &lt;- as.Date(&quot;17-05-1814&quot;, format=&quot;%d-%m-%Y&quot;)
day1; day2 # they look exactly the same, but:</code></pre>
<pre><code>## [1] &quot;1814-05-17&quot;</code></pre>
<pre><code>## [1] &quot;1814-05-17&quot;</code></pre>
<pre class="r"><code>day1 + 1 # doesn&#39;t work, day1 is a character string</code></pre>
<pre><code>## Error in day1 + 1: non-numeric argument to binary operator</code></pre>
<pre class="r"><code>day2 + 1 # does work, day2 is a date</code></pre>
<pre><code>## [1] &quot;1814-05-18&quot;</code></pre>
<p>The most likely thing we might need to do is change strings or characters to dates. There are numerous ways date strings might be saved and we can easily convert with lubridate using commands which indicate in which order days, months, and years come.</p>
<pre class="r"><code>ymd(&quot;2019-12-25&quot;) </code></pre>
<pre><code>## [1] &quot;2019-12-25&quot;</code></pre>
<pre class="r"><code>mdy(&quot;12/25/2019&quot;) # American standard</code></pre>
<pre><code>## [1] &quot;2019-12-25&quot;</code></pre>
<pre class="r"><code>dmy(&quot;25.12.2019&quot;) # lubridate will also recognize various possible separators</code></pre>
<pre><code>## [1] &quot;2019-12-25&quot;</code></pre>
<pre class="r"><code>dmy(&quot;21st of June in the year of our lord 2018&quot;) # as well as month names and possible phrasings, it&#39;s really pretty smart</code></pre>
<pre><code>## [1] &quot;2018-06-21&quot;</code></pre>
<pre class="r"><code>dmy(&quot;den 2. februar 2019&quot;) # and multilingual, though this will depend on your language locale (Sys.getlocale (category = &quot;LC_ALL&quot;))</code></pre>
<pre><code>## [1] &quot;2019-02-02&quot;</code></pre>
<p>Then you can do the reverse, extract the day, month, or year from <code>date</code> or <code>date-time</code> objects.</p>
<pre class="r"><code>(today())</code></pre>
<pre><code>## [1] &quot;2021-08-14&quot;</code></pre>
<pre class="r"><code>year(today())</code></pre>
<pre><code>## [1] 2021</code></pre>
<pre class="r"><code>month(today())</code></pre>
<pre><code>## [1] 8</code></pre>
<pre class="r"><code>day(today())</code></pre>
<pre><code>## [1] 14</code></pre>
<pre class="r"><code>week(today()) # useful for foreigners in Norway</code></pre>
<pre><code>## [1] 33</code></pre>
<pre class="r"><code>wday(today(), label = TRUE, abbr = FALSE)</code></pre>
<pre><code>## [1] lørdag
## Levels: søndag &lt; mandag &lt; tirsdag &lt; onsdag &lt; torsdag &lt; fredag &lt; lørdag</code></pre>
<p>For a great, short introduction to dates see chapter 16 in <span class="citation">Wickham and Grolemund (2016)</span> or online <a href="documentation">https://lubridate.tidyverse.org/</a> for the package <code>lubridate</code>.</p>
</div>
<div id="references" class="section level1 unnumbered">
<h1 class="unnumbered">References</h1>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-healy2018data" class="csl-entry">
Healy, Kieran. 2018. <em>Data Visualization: A Practical Introduction</em>. Princeton University Press. <a href="https://socviz.co/">https://socviz.co/</a>.
</div>
<div id="ref-wickham2016elegant" class="csl-entry">
Wickham, Hadley. 2016. <span>“Elegant Graphics for Data Analysis.”</span> <a href="https://ggplot2-book.org/">https://ggplot2-book.org/</a>.
</div>
<div id="ref-wickham2016r" class="csl-entry">
Wickham, Hadley, and Garrett Grolemund. 2016. <em><span>R</span> for Data Science: Import, Tidy, Transform, Visualize, and Model Data</em>. " O’Reilly Media, Inc.". <a href="https://r4ds.had.co.nz/index.html">https://r4ds.had.co.nz/index.html</a>.
</div>
</div>
</div>

<br><br><p>2021. <a href="mailto: gregory.fergusoncradler@inn.no">gregory.fergusoncradler@inn.no</a></p>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
